FROM golang:1.22

WORKDIR /app

COPY go.mod go.sum ./
RUN go mod download

COPY . ./

ARG DEBUG=""
ENV E_DEBUG=$DEBUG
RUN ./build.sh

ENV API_DATABASE_HOSTNAME="hostname"
ENV API_DATABASE_PORT="5432"
ENV API_DATABASE_NAME="motmot"
ENV API_DATABASE_USERNAME="motmot"
ENV API_DATABASE_PASSWORD=""
ENV API_PORT="8080"
ENV API_TOKEN_SECRET=""
ENV API_ENDPOINT_FQDN="/api"

CMD ["/api"]